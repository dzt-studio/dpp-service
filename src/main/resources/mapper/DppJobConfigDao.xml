<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="dzt.studio.dppservice.dao.job.DppJobConfigDao">
    <resultMap id="BaseResultMap" type="dzt.studio.dppservice.domain.job.DppJobConfig">
        <id column="id" jdbcType="VARCHAR" property="id"/>
        <result column="parallelism" jdbcType="INTEGER" property="parallelism"/>
        <result column="checkpoint_enable" jdbcType="BOOLEAN" property="checkpointEnable"/>
        <result column="checkpoint_interval" jdbcType="INTEGER" property="checkpointInterval"/>
        <result column="restart_strategy_count" jdbcType="SMALLINT" property="restartStrategyCount"/>
        <result column="restart_strategy_time" jdbcType="INTEGER" property="restartStrategyTime"/>
        <result column="sql_details" jdbcType="VARCHAR" property="sqlDetails"/>
        <result column="job_id" jdbcType="VARCHAR" property="jobId"/>
    </resultMap>
    <sql id="Base_Column_List">
        id, parallelism, checkpoint_enable, checkpoint_interval, restart_strategy_count,
    restart_strategy_time, sql_details, job_id
    </sql>
    <select id="selectByPrimaryKey" parameterType="java.lang.String" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from "dpp_job_config"
        where id = #{id,jdbcType=VARCHAR}
    </select>
    <select id="selectByJobId" parameterType="java.lang.String" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from "dpp_job_config"
        where job_id = #{job_id,jdbcType=VARCHAR}
    </select>
    <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
        delete
        from "dpp_job_config"
        where id = #{id,jdbcType=VARCHAR}
    </delete>
    <delete id="deleteByJobId" parameterType="java.lang.String">
        delete
        from "dpp_job_config"
        where job_id = #{jobId,jdbcType=VARCHAR}
    </delete>
    <insert id="insert" keyColumn="id" keyProperty="id" parameterType="dzt.studio.dppservice.domain.job.DppJobConfig"
            useGeneratedKeys="true">
        insert into "dpp_job_config" (parallelism, checkpoint_enable, checkpoint_interval,
                                      restart_strategy_count, restart_strategy_time,
                                      sql_details, job_id)
        values (#{parallelism,jdbcType=INTEGER}, #{checkpointEnable,jdbcType=BOOLEAN},
                #{checkpointInterval,jdbcType=INTEGER},
                #{restartStrategyCount,jdbcType=SMALLINT}, #{restartStrategyTime,jdbcType=INTEGER},
                #{sqlDetails,jdbcType=VARCHAR}, #{jobId,jdbcType=VARCHAR})
    </insert>
    <insert id="upsert" keyColumn="id" keyProperty="id" parameterType="dzt.studio.dppservice.domain.job.DppJobConfig"
            useGeneratedKeys="true">
        insert into "dpp_job_config" (parallelism, checkpoint_enable, checkpoint_interval,
                                      restart_strategy_count, restart_strategy_time,
                                      sql_details, job_id)
        values (#{parallelism,jdbcType=INTEGER}, #{checkpointEnable,jdbcType=BOOLEAN},
                #{checkpointInterval,jdbcType=INTEGER},
                #{restartStrategyCount,jdbcType=SMALLINT}, #{restartStrategyTime,jdbcType=INTEGER},
                #{sqlDetails,jdbcType=VARCHAR}, #{jobId,jdbcType=VARCHAR})
        ON CONFLICT(job_id) do update set parallelism            = EXCLUDED.parallelism,
                                          checkpoint_enable      = EXCLUDED.checkpoint_enable,
                                          checkpoint_interval    = EXCLUDED.checkpoint_interval,
                                          restart_strategy_count = EXCLUDED.restart_strategy_count,
                                          restart_strategy_time  = EXCLUDED.restart_strategy_time,
                                          sql_details            = EXCLUDED.sql_details,
                                          job_id               = EXCLUDED.job_id
    </insert>
    <insert id="insertSelective" keyColumn="id" keyProperty="id"
            parameterType="dzt.studio.dppservice.domain.job.DppJobConfig" useGeneratedKeys="true">
        insert into "dpp_job_config"
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="parallelism != null">
                parallelism,
            </if>
            <if test="checkpointEnable != null">
                checkpoint_enable,
            </if>
            <if test="checkpointInterval != null">
                checkpoint_interval,
            </if>
            <if test="restartStrategyCount != null">
                restart_strategy_count,
            </if>
            <if test="restartStrategyTime != null">
                restart_strategy_time,
            </if>
            <if test="sqlDetails != null">
                sql_details,
            </if>
            <if test="jobId != null">
                job_id,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="parallelism != null">
                #{parallelism,jdbcType=INTEGER},
            </if>
            <if test="checkpointEnable != null">
                #{checkpointEnable,jdbcType=BOOLEAN},
            </if>
            <if test="checkpointInterval != null">
                #{checkpointInterval,jdbcType=INTEGER},
            </if>
            <if test="restartStrategyCount != null">
                #{restartStrategyCount,jdbcType=SMALLINT},
            </if>
            <if test="restartStrategyTime != null">
                #{restartStrategyTime,jdbcType=INTEGER},
            </if>
            <if test="sqlDetails != null">
                #{sqlDetails,jdbcType=VARCHAR},
            </if>
            <if test="jobId != null">
                #{jobId,jdbcType=VARCHAR},
            </if>
        </trim>
    </insert>
    <update id="updateByPrimaryKeySelective" parameterType="dzt.studio.dppservice.domain.job.DppJobConfig">
        update "dpp_job_config"
        <set>
            <if test="parallelism != null">
                parallelism = #{parallelism,jdbcType=INTEGER},
            </if>
            <if test="checkpointEnable != null">
                checkpoint_enable = #{checkpointEnable,jdbcType=BOOLEAN},
            </if>
            <if test="checkpointInterval != null">
                checkpoint_interval = #{checkpointInterval,jdbcType=INTEGER},
            </if>
            <if test="restartStrategyCount != null">
                restart_strategy_count = #{restartStrategyCount,jdbcType=SMALLINT},
            </if>
            <if test="restartStrategyTime != null">
                restart_strategy_time = #{restartStrategyTime,jdbcType=INTEGER},
            </if>
            <if test="sqlDetails != null">
                sql_details = #{sqlDetails,jdbcType=VARCHAR},
            </if>
            <if test="jobId != null">
                job_id = #{jobId,jdbcType=VARCHAR},
            </if>
        </set>
        where id = #{id,jdbcType=VARCHAR}
    </update>
    <update id="updateByPrimaryKey" parameterType="dzt.studio.dppservice.domain.job.DppJobConfig">
        update "dpp_job_config"
        set parallelism            = #{parallelism,jdbcType=INTEGER},
            checkpoint_enable      = #{checkpointEnable,jdbcType=BOOLEAN},
            checkpoint_interval    = #{checkpointInterval,jdbcType=INTEGER},
            restart_strategy_count = #{restartStrategyCount,jdbcType=SMALLINT},
            restart_strategy_time  = #{restartStrategyTime,jdbcType=INTEGER},
            sql_details            = #{sqlDetails,jdbcType=VARCHAR},
            job_id                 = #{jobId,jdbcType=VARCHAR}
        where id = #{id,jdbcType=VARCHAR}
    </update>
</mapper>